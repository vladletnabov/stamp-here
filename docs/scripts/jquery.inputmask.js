(function(e){if(e.fn.inputmask===undefined){e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:false,numericInput:false,isNumeric:false,radixPoint:"",skipRadixDance:false,rightAlignNumerics:true,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,n,r,i){var s=e.length;if(!t){if(n=="*"){s=r.length+1}else if(n>1){s+=e.length*(n-1)}}return s}},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")}};e.fn.inputmask=function(t,n){function m(e){var t=document.createElement("input"),e="on"+e,n=e in t;if(!n){t.setAttribute(e,"return;");n=typeof t[e]=="function"}t=null;return n}function g(t,n){var i=r.aliases[t];if(i){if(i.alias)g(i.alias);e.extend(true,r,i);e.extend(true,r,n);return true}return false}function y(t){if(r.numericInput){t=t.split("").reverse().join("")}var n=false,i=0,s=r.greedy,o=r.repeat;if(o=="*")s=false;if(s==true&&r.placeholder=="")r.placeholder=" ";if(t.length==1&&s==false){r.placeholder=""}var u=e.map(t.split(""),function(e,t){var s=[];if(e==r.escapeChar){n=true}else if(e!=r.optionalmarker.start&&e!=r.optionalmarker.end||n){var o=r.definitions[e];if(o&&!n){for(var u=0;u<o.cardinality;u++){s.push(E(i+u))}}else{s.push(e);n=false}i+=s.length;return s}});var a=u.slice();for(var f=1;f<o&&s;f++){a=a.concat(u.slice())}return{mask:a,repeat:o,greedy:s}}function b(t){if(r.numericInput){t=t.split("").reverse().join("")}var n=false,i=false;var s=false;return e.map(t.split(""),function(e,t){var o=[];if(e==r.escapeChar){i=true}else if(e==r.optionalmarker.start&&!i){n=true;s=true}else if(e==r.optionalmarker.end&&!i){n=false;s=true}else{var u=r.definitions[e];if(u&&!i){var a=u["prevalidator"],f=a?a.length:0;for(var l=1;l<u.cardinality;l++){var c=f>=l?a[l-1]:[],h=c["validator"],p=c["cardinality"];o.push({fn:h?typeof h=="string"?new RegExp(h):new function(){this.test=h}:new RegExp("."),cardinality:p?p:1,optionality:n,newBlockMarker:n==true?s:false,offset:0,casing:u["casing"],def:u["definitionSymbol"]||e});if(n==true)s=false}o.push({fn:u.validator?typeof u.validator=="string"?new RegExp(u.validator):new function(){this.test=u.validator}:new RegExp("."),cardinality:u.cardinality,optionality:n,newBlockMarker:s,offset:0,casing:u["casing"],def:u["definitionSymbol"]||e})}else{o.push({fn:null,cardinality:0,optionality:n,newBlockMarker:s,offset:0,casing:null,def:e});i=false}s=false;return o}})}function w(){function o(e){function n(){this.matches=[];this.isGroup=false;this.isOptional=false;this.isQuantifier=false}var t=/(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[]()|\\]+|./g;var i=new n,o,u,a=[];s=[];while(o=t.exec(e)){u=o[0];switch(u.charAt(0)){case r.optionalmarker.end:case r.groupmarker.end:var f=a.pop();if(a.length>0){a[a.length-1]["matches"].push(f)}else{s.push(f);i=new n}break;case r.optionalmarker.start:if(!i.isGroup&&i.matches.length>0)s.push(i);i=new n;i.isOptional=true;a.push(i);break;case r.groupmarker.start:if(!i.isGroup&&i.matches.length>0)s.push(i);i=new n;i.isGroup=true;a.push(i);break;case r.quantifiermarker.start:var l=new n;l.isQuantifier=true;l.matches.push(u);if(a.length>0){a[a.length-1]["matches"].push(l)}else{i.matches.push(l)}break;default:if(a.length>0){a[a.length-1]["matches"].push(u)}else{i.matches.push(u)}}}if(i.matches.length>0)s.push(i);return s}function u(e){return r.optionalmarker.start+e+r.optionalmarker.end}function a(e){var t=0,n=0,s=e.length;for(i=0;i<s;i++){if(e.charAt(i)==r.optionalmarker.start){t++}if(e.charAt(i)==r.optionalmarker.end){n++}if(t>0&&t==n)break}var o=[e.substring(0,i)];if(i<s){o.push(e.substring(i+1,s))}return o}function f(e){var t=e.length;for(i=0;i<t;i++){if(e.charAt(i)==r.optionalmarker.start){break}}var n=[e.substring(0,i)];if(i<t){n.push(e.substring(i+1,t))}return n}function l(r,i,s){var o=a(i);var c,h;var p=f(o[0]);if(p.length>1){c=r+p[0]+u(p[1])+(o.length>1?o[1]:"");if(e.inArray(c,n)==-1){n.push(c);h=y(c);t.push({mask:c,_buffer:h["mask"],buffer:h["mask"].slice(),tests:b(c),lastValidPosition:-1,greedy:h["greedy"],repeat:h["repeat"],metadata:s})}c=r+p[0]+(o.length>1?o[1]:"");if(e.inArray(c,n)==-1){n.push(c);h=y(c);t.push({mask:c,_buffer:h["mask"],buffer:h["mask"].slice(),tests:b(c),lastValidPosition:-1,greedy:h["greedy"],repeat:h["repeat"],metadata:s})}if(f(p[1]).length>1){l(r+p[0],p[1]+o[1],s)}if(o.length>1&&f(o[1]).length>1){l(r+p[0]+u(p[1]),o[1],s);l(r+p[0],o[1],s)}}else{c=r+o;if(e.inArray(c,n)==-1){n.push(c);h=y(c);t.push({mask:c,_buffer:h["mask"],buffer:h["mask"].slice(),tests:b(c),lastValidPosition:-1,greedy:h["greedy"],repeat:h["repeat"],metadata:s})}}}var t=[];var n=[];var s=[];if(e.isFunction(r.mask)){r.mask=r.mask.call(this,r)}if(e.isArray(r.mask)){e.each(r.mask,function(e,t){if(t["mask"]!=undefined){l("",t["mask"].toString(),t)}else l("",t.toString())})}else l("",r.mask.toString());return r.greedy?t:t.sort(function(e,t){return e["mask"].length-t["mask"].length})}function E(e){return r.placeholder.charAt(e%r.placeholder.length)}function S(t,n){function l(){return t[n]}function c(){return l()["tests"]}function h(){return l()["_buffer"]}function p(){return l()["buffer"]}function d(i,s,o){function u(e,t,n,i){var s=g(e),o=n?1:0,u="",a=t["buffer"];for(var f=t["tests"][s].cardinality;f>o;f--){u+=x(a,s-(f-1))}if(n){u+=n}return t["tests"][s].fn!=null?t["tests"][s].fn.test(u,a,e,i,r):n==x(t["_buffer"],e,true)||n==r.skipOptionalPartCharacter?{refresh:true,c:x(t["_buffer"],e,true),pos:e}:false}function a(n,r){var o=false;e.each(r,function(t,r){o=e.inArray(r["activeMasksetIndex"],n)==-1&&r["result"]!==false;if(o)return false});if(o){r=e.map(r,function(r,i){if(e.inArray(r["activeMasksetIndex"],n)==-1){return r}else{t[r["activeMasksetIndex"]]["lastValidPosition"]=v}})}else{var a=-1,f=-1;e.each(r,function(t,r){if(e.inArray(r["activeMasksetIndex"],n)!=-1&&r["result"]!==false&(a==-1||a>r["result"]["pos"])){a=r["result"]["pos"];f=r["activeMasksetIndex"]}});r=e.map(r,function(r,o){if(e.inArray(r["activeMasksetIndex"],n)!=-1){if(r["result"]["pos"]==a){return r}else if(r["result"]!==false){for(var l=i;l<a;l++){rsltValid=u(l,t[r["activeMasksetIndex"]],t[f]["buffer"][l],true);if(rsltValid===false){break}else{S(t[r["activeMasksetIndex"]]["buffer"],l,t[f]["buffer"][l],true);t[r["activeMasksetIndex"]]["lastValidPosition"]=l}}rsltValid=u(a,t[r["activeMasksetIndex"]],s,true);if(rsltValid!==false){S(t[r["activeMasksetIndex"]]["buffer"],a,s,true);t[r["activeMasksetIndex"]]["lastValidPosition"]=a}return r}}})}return r}o=o===true;if(o){var f=u(i,l(),s,o);if(f===true){f={pos:i}}return f}var c=[],f=false,h=n,d=p().slice(),v=l()["lastValidPosition"],E=w(i),T=[];e.each(t,function(e,t){if(typeof t=="object"){n=e;var r=i;var a=l()["lastValidPosition"],g;if(a==v){if(r-v>1){for(var w=a==-1?0:a;w<r;w++){g=u(w,l(),d[w],true);if(g===false){break}else{S(p(),w,d[w],true);if(g===true){g={pos:w}}var E=g.pos||w;if(l()["lastValidPosition"]<E)l()["lastValidPosition"]=E}}}if(!m(r)&&!u(r,l(),s,o)){var x=b(r)-r;for(var N=0;N<x;N++){if(u(++r,l(),s,o)!==false)break}T.push(n)}}if(l()["lastValidPosition"]>=v||n==h){if(r>=0&&r<y()){f=u(r,l(),s,o);if(f!==false){if(f===true){f={pos:r}}var E=f.pos||r;if(l()["lastValidPosition"]<E)l()["lastValidPosition"]=E}c.push({activeMasksetIndex:e,result:f})}}}});n=h;return a(T,c)}function v(){var r=n,i={activeMasksetIndex:0,lastValidPosition:-1,next:-1};e.each(t,function(e,t){if(typeof t=="object"){n=e;if(l()["lastValidPosition"]>i["lastValidPosition"]){i["activeMasksetIndex"]=e;i["lastValidPosition"]=l()["lastValidPosition"];i["next"]=b(l()["lastValidPosition"])}else if(l()["lastValidPosition"]==i["lastValidPosition"]&&(i["next"]==-1||i["next"]>b(l()["lastValidPosition"]))){i["activeMasksetIndex"]=e;i["lastValidPosition"]=l()["lastValidPosition"];i["next"]=b(l()["lastValidPosition"])}}});n=i["lastValidPosition"]!=-1&&t[r]["lastValidPosition"]==i["lastValidPosition"]?r:i["activeMasksetIndex"];if(r!=n){C(p(),b(i["lastValidPosition"]),y());l()["writeOutBuffer"]=true}f.data("_inputmask")["activeMasksetIndex"]=n}function m(e){var t=g(e);var n=c()[t];return n!=undefined?n.fn:false}function g(e){return e%c().length}function y(){return r.getMaskLength(h(),l()["greedy"],l()["repeat"],p(),r)}function b(e){var t=y();if(e>=t)return t;var n=e;while(++n<t&&!m(n)){}return n}function w(e){var t=e;if(t<=0)return 0;while(--t>0&&!m(t)){}return t}function S(e,t,n,r){if(r)t=T(e,t);var i=c()[g(t)];var s=n;if(s!=undefined){switch(i.casing){case"upper":s=n.toUpperCase();break;case"lower":s=n.toLowerCase();break}}e[t]=s}function x(e,t,n){if(n)t=T(e,t);return e[t]}function T(e,t){var n;while(e[t]==undefined&&e.length<y()){n=0;while(h()[n]!==undefined){e.push(h()[n++])}}return t}function N(e,t,n){e._valueSet(t.join(""));if(n!=undefined){P(e,n)}}function C(e,t,n){for(var r=t,i=y();r<n&&r<i;r++){S(e,r,x(h().slice(),r,true))}}function k(e,t){var n=g(t);S(e,t,x(h(),n))}function L(i,s,o,u){var a=u!=undefined?u.slice():O(i._valueGet()).split("");e.each(t,function(e,t){if(typeof t=="object"){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=-1;t["p"]=-1}});if(o!==true)n=0;if(s)i._valueSet("");var f=y();e.each(a,function(t,n){var u=l()["lastValidPosition"],a=u==-1?t:b(u);if(e.isArray(r.mask)||e.inArray(n,h().slice(u+1,a))==-1)e(i).trigger("_keypress",[true,n.charCodeAt(0),s,o,t])});if(o===true&&l()["p"]!=-1){l()["lastValidPosition"]=w(l()["p"])}}function A(t){return e.inputmask.escapeRegex.call(this,t)}function O(e){return e.replace(new RegExp("("+A(h().join(""))+")*$"),"")}function M(e){var t=p(),n=t.slice(),r,i;for(var i=n.length-1;i>=0;i--){var r=g(i);if(c()[r].optionality){if(!m(i)||!d(i,t[i],true))n.pop();else break}else break}N(e,n)}function _(t,n){if(c()&&(n===true||!t.hasClass("hasDatepicker"))){var r=e.map(p(),function(e,t){return m(t)&&d(t,e,true)?e:null});return(i?r.reverse():r).join("")}else{return t[0]._valueGet()}}function D(e){if(i&&typeof e=="number"){var t=p().length;e=t-e}return e}function P(t,n,i){var s=t.jquery&&t.length>0?t[0]:t,o;if(typeof n=="number"){n=D(n);i=D(i);if(!e(t).is(":visible")){return}i=typeof i=="number"?i:n;if(r.insertMode==false&&n==i)i++;if(s.setSelectionRange){s.selectionStart=n;s.selectionEnd=u?n:i}else if(s.createTextRange){o=s.createTextRange();o.collapse(true);o.moveEnd("character",i);o.moveStart("character",n);o.select()}}else{if(!e(t).is(":visible")){return{begin:0,end:0}}if(s.setSelectionRange){n=s.selectionStart;i=s.selectionEnd}else if(document.selection&&document.selection.createRange){o=document.selection.createRange();n=0-o.duplicate().moveStart("character",-1e5);i=n+o.text.length}n=D(n);i=D(i);return{begin:n,end:i}}}function H(r){var i=false,s=0,o=n;e.each(t,function(e,t){if(typeof t=="object"){n=e;var o=w(y());if(t["lastValidPosition"]>=s&&t["lastValidPosition"]==o){var u=true;for(var a=0;a<=o;a++){var f=m(a),l=g(a);if(f&&(r[a]==undefined||r[a]==E(a))||!f&&r[a]!=h()[l]){u=false;break}}i=i||u;if(i)return false}s=t["lastValidPosition"]}});n=o;return i}function B(e,t){return i?e-t>1||e-t==1&&r.insertMode:t-e>1||t-e==1&&r.insertMode}var i=false,s=p().join(""),f;this.unmaskedvalue=function(e,t){i=e.data("_inputmask")["isRTL"];return _(e,t)};this.isComplete=function(e){return H(e)};this.mask=function(u){function q(t){var n=e._data(t).events;e.each(n,function(t,n){e.each(n,function(e,t){if(t.namespace=="inputmask"){if(t.type!="setvalue"&&t.type!="_keypress"){var n=t.handler;t.handler=function(e){if(this.readOnly||this.disabled)e.preventDefault;else return n.apply(this,arguments)}}}})})}function R(t){var n;if(Object.getOwnPropertyDescriptor)n=Object.getOwnPropertyDescriptor(t,"value");if(n&&n.get){if(!t._valueGet){var r=n.get;var s=n.set;t._valueGet=function(){return i?r.call(this).split("").reverse().join(""):r.call(this)};t._valueSet=function(e){s.call(this,i?e.split("").reverse().join(""):e)};Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("_inputmask"),i=n["masksets"],s=n["activeMasksetIndex"];return n&&n["opts"].autoUnmask?t.inputmask("unmaskedvalue"):r.call(this)!=i[s]["_buffer"].join("")?r.call(this):""},set:function(t){s.call(this,t);e(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&t.__lookupGetter__("value")){if(!t._valueGet){var r=t.__lookupGetter__("value");var s=t.__lookupSetter__("value");t._valueGet=function(){return i?r.call(this).split("").reverse().join(""):r.call(this)};t._valueSet=function(e){s.call(this,i?e.split("").reverse().join(""):e)};t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("_inputmask"),i=n["masksets"],s=n["activeMasksetIndex"];return n&&n["opts"].autoUnmask?t.inputmask("unmaskedvalue"):r.call(this)!=i[s]["_buffer"].join("")?r.call(this):""});t.__defineSetter__("value",function(t){s.call(this,t);e(this).triggerHandler("setvalue.inputmask")})}}else{if(!t._valueGet){t._valueGet=function(){return i?this.value.split("").reverse().join(""):this.value};t._valueSet=function(e){this.value=i?e.split("").reverse().join(""):e}}if(e.valHooks.text==undefined||e.valHooks.text.inputmaskpatch!=true){var r=e.valHooks.text&&e.valHooks.text.get?e.valHooks.text.get:function(){return this.value};var s=e.valHooks.text&&e.valHooks.text.set?e.valHooks.text.set:function(e){return this.value=e};jQuery.extend(e.valHooks,{text:{get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask")["opts"].autoUnmask)return n.inputmask("unmaskedvalue");else{var i=r.call(t),s=n.data("_inputmask"),o=s["masksets"],u=s["activeMasksetIndex"];return i!=o[u]["_buffer"].join("")?i:""}}else return r.call(t)},set:function(t,n){var r=e(t);var i=s.call(t,n);if(r.data("_inputmask"))r.triggerHandler("setvalue.inputmask");return i},inputmaskpatch:true}})}}}function U(e,t,n,r){var i=p();if(r!==false)while(!m(e)&&e-1>=0)e--;for(var s=e;s<t&&s<y();s++){if(m(s)){k(i,s);var o=b(s);var u=x(i,o);if(u!=E(o)){if(o<y()&&d(s,u,true)!==false&&c()[g(s)].def==c()[g(o)].def){S(i,s,x(i,o),true);if(o<t){k(i,o)}}else{if(m(s))break}}}else{k(i,s)}}if(n!=undefined)S(i,w(t),n);if(l()["greedy"]==false){var a=O(i.join("")).split("");i.length=a.length;for(var s=0,f=i.length;s<f;s++){i[s]=a[s]}if(i.length==0)l()["buffer"]=h().slice()}return e}function z(e,t,n,r){var i=p();for(var s=e;s<=t&&s<y();s++){if(m(s)){var o=x(i,s,true);S(i,s,n,true);if(o!=E(s)){var u=b(s);if(u<y()){if(d(u,o,true)!==false&&c()[g(s)].def==c()[g(u)].def)n=o;else{if(m(u))break;else n=o}}else break}else{n=o;if(r!==true)break}}else k(i,s)}var a=i.length;if(l()["greedy"]==false){var f=O(i.join("")).split("");i.length=f.length;for(var s=0,v=i.length;s<v;s++){i[s]=f[s]}if(i.length==0)l()["buffer"]=h().slice()}return t-(a-i.length)}function W(e,t,n){if(r.numericInput||i){switch(t){case r.keyCode.BACKSPACE:t=r.keyCode.DELETE;break;case r.keyCode.DELETE:t=r.keyCode.BACKSPACE;break}if(i){var s=n.end;n.end=n.begin;n.begin=s}}var o=true;if(n.begin==n.end){var u=t==r.keyCode.BACKSPACE?n.begin-1:n.begin;if(r.isNumeric&&r.radixPoint!=""&&p()[u]==r.radixPoint){n.begin=p().length-1==u?n.begin:t==r.keyCode.BACKSPACE?u:b(u);n.end=n.begin}o=false;if(t==r.keyCode.BACKSPACE)n.begin--;else if(t==r.keyCode.DELETE)n.end++}else if(n.end-n.begin==1&&!r.insertMode){o=false;if(t==r.keyCode.BACKSPACE)n.begin--}C(p(),n.begin,n.end);var a=y();if(r.greedy==false){U(n.begin,a,undefined,!i&&t==r.keyCode.BACKSPACE&&!o)}else{var f=n.begin;for(var c=n.begin;c<n.end;c++){if(m(c)||!o)f=U(n.begin,a,undefined,!i&&t==r.keyCode.BACKSPACE&&!o)}if(!o)n.begin=f}var h=b(-1);L(e,false,true,p());if(l()["lastValidPosition"]<h){l()["lastValidPosition"]=-1;l()["p"]=h}else{l()["p"]=n.begin}}function X(t){A=false;var n=this,i=e(n),u=t.keyCode,a=P(n);if(u==r.keyCode.BACKSPACE||u==r.keyCode.DELETE||o&&u==127||t.ctrlKey&&u==88){t.preventDefault();W(n,u,a);v();N(n,p(),l()["p"]);if(n._valueGet()==h().join(""))i.trigger("cleared");if(r.showTooltip){i.prop("title",l()["mask"])}}else if(u==r.keyCode.END||u==r.keyCode.PAGE_DOWN){setTimeout(function(){var e=b(l()["lastValidPosition"]);if(!r.insertMode&&e==y()&&!t.shiftKey)e--;P(n,t.shiftKey?a.begin:e,e)},0)}else if(u==r.keyCode.HOME&&!t.shiftKey||u==r.keyCode.PAGE_UP){P(n,0,t.shiftKey?a.begin:0)}else if(u==r.keyCode.ESCAPE){L(n,true,true,s);i.click()}else if(u==r.keyCode.INSERT&&!(t.shiftKey||t.ctrlKey)){r.insertMode=!r.insertMode;P(n,!r.insertMode&&a.begin==y()?a.begin-1:a.begin)}else if(r.insertMode==false&&!t.shiftKey){if(u==r.keyCode.RIGHT){setTimeout(function(){var e=P(n);P(n,e.begin)},0)}else if(u==r.keyCode.LEFT){setTimeout(function(){var e=P(n);P(n,e.begin-1)},0)}}var f=P(n);if(r.onKeyDown.call(this,t,p(),r)===true)P(n,f.begin,f.end);_=e.inArray(u,r.ignorables)!=-1}function V(i,s,o,u,a,f){if(o==undefined&&A)return false;A=true;var c=this,h=e(c);i=i||window.event;var o=o||i.which||i.charCode||i.keyCode;if(!(i.ctrlKey&&i.altKey)&&(i.ctrlKey||i.metaKey||_)&&s!==true){return true}else{if(o){if(s!==true&&o==46&&i.shiftKey==false&&r.radixPoint==",")o=44;var m,g,T,C=String.fromCharCode(o);if(s){var k=a?f:l()["lastValidPosition"]+1;m={begin:k,end:k}}else{m=P(c)}var L=B(m.begin,m.end),O=false,M=n;if(L){n=M;W(c,r.keyCode.DELETE,m);if(!r.insertMode){e.each(t,function(e,t){if(typeof t=="object"){n=e;z(m.begin,y(),E(m.begin),true);l()["lastValidPosition"]=b(l()["lastValidPosition"])}})}n=M}var D=p().join("").indexOf(r.radixPoint);if(r.isNumeric&&s!==true&&D!=-1){if(r.greedy&&m.begin<=D){m.begin=w(m.begin);m.end=m.begin}else if(C==r.radixPoint){m.begin=D;m.end=m.begin}}var j=m.begin;g=d(j,C,a);if(a===true)g=[{activeMasksetIndex:n,result:g}];var F=-1;e.each(g,function(e,t){n=t["activeMasksetIndex"];l()["writeOutBuffer"]=true;var i=t["result"];if(i!==false){var s=false,o=p();if(i!==true){s=i["refresh"];j=i.pos!=undefined?i.pos:j;C=i.c!=undefined?i.c:C}if(s!==true){if(r.insertMode==true){var u=y();var f=o.slice();while(x(f,u,true)!=E(u)&&u>=j){u=u==0?-1:w(u)}if(u>=j){z(j,o.length,C);var c=l()["lastValidPosition"],h=b(c);if(h!=y()&&c>=j&&x(p(),h,true)!=E(h)){l()["lastValidPosition"]=h}}else l()["writeOutBuffer"]=false}else S(o,j,C,true);if(F==-1||F>b(j)){F=b(j)}}else if(!a){var d=j<y()?j+1:j;if(F==-1||F>d){F=d}}if(F>l()["p"])l()["p"]=F}});if(a!==true){n=M;v()}if(u!==false){e.each(g,function(e,t){if(t["activeMasksetIndex"]==n){T=t;return false}});if(T!=undefined){var I=this;setTimeout(function(){r.onKeyValidation.call(I,T["result"],r)},0);if(l()["writeOutBuffer"]&&T["result"]!==false){var q=p();var R;if(s){R=undefined}else if(r.numericInput){if(j>D){R=w(F)}else if(C==r.radixPoint){R=F-1}else R=w(F-1)}else{R=F}N(c,q,R);if(s!==true){setTimeout(function(){if(H(q))h.trigger("complete")},0)}}else if(L){l()["buffer"]=l()["undoBuffer"].split("")}}}if(r.showTooltip){h.prop("title",l()["mask"])}i.preventDefault()}}}function J(t){var n=e(this),i=this,o=t.keyCode,u=p();r.onKeyUp.call(this,t,u,r);if(o==r.keyCode.TAB&&r.showMaskOnFocus){if(n.hasClass("focus.inputmask")&&i._valueGet().length==0){u=h().slice();N(i,u);P(i,0);s=p().join("")}else{N(i,u);P(i,0,y())}}}f=e(u);if(!f.is(":input"))return;f.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:r,isRTL:false});if(r.showTooltip){f.prop("title",l()["mask"])}l()["greedy"]=l()["greedy"]?l()["greedy"]:l()["repeat"]==0;if(f.attr("maxLength")!=null){var T=f.prop("maxLength");if(T>-1){e.each(t,function(e,t){if(typeof t=="object"){if(t["repeat"]=="*"){t["repeat"]=T}}})}if(y()>T&&T>-1){if(T<h().length)h().length=T;if(l()["greedy"]==false){l()["repeat"]=Math.round(T/h().length)}f.prop("maxLength",y()*2)}}R(u);var A=false,_=false;if(r.numericInput)r.isNumeric=r.numericInput;if(u.dir=="rtl"||r.numericInput&&r.rightAlignNumerics||r.isNumeric&&r.rightAlignNumerics)f.css("text-align","right");if(u.dir=="rtl"||r.numericInput){u.dir="ltr";f.removeAttr("dir");var j=f.data("_inputmask");j["isRTL"]=true;f.data("_inputmask",j);i=true}f.unbind(".inputmask");f.removeClass("focus.inputmask");f.closest("form").bind("submit",function(){if(s!=p().join("")){f.change()}}).bind("reset",function(){e.each(t,function(e,t){if(typeof t=="object"){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=-1}})});f.bind("mouseenter.inputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.inputmask")&&r.showMaskOnHover){if(n._valueGet()!=p().join("")){N(n,p())}}}).bind("blur.inputmask",function(){var i=e(this),o=this,u=o._valueGet(),a=p();i.removeClass("focus.inputmask");if(s!=p().join("")){i.change()}if(r.clearMaskOnLostFocus&&u!=""){if(u==h().join(""))o._valueSet("");else{M(o)}}if(!H(a)){i.trigger("incomplete");if(r.clearIncomplete){e.each(t,function(e,t){if(typeof t=="object"){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=-1}});n=0;if(r.clearMaskOnLostFocus)o._valueSet("");else{a=h().slice();N(o,a)}}}}).bind("focus.inputmask",function(){var t=e(this),n=this,i=n._valueGet();if(r.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!r.showMaskOnHover||r.showMaskOnHover&&i=="")){if(n._valueGet()!=p().join("")){N(n,p(),b(l()["lastValidPosition"]))}}t.addClass("focus.inputmask");s=p().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),n=this;if(r.clearMaskOnLostFocus){if(!t.hasClass("focus.inputmask")&&n._valueGet()!=t.attr("placeholder")){if(n._valueGet()==h().join("")||n._valueGet()=="")n._valueSet("");else{M(n)}}}}).bind("click.inputmask",function(){var t=this;setTimeout(function(){var n=P(t),i=p();if(n.begin==n.end){var s=r.isRTL?D(n.begin):n.begin,o=l()["lastValidPosition"],u;if(r.isNumeric){u=r.skipRadixDance===false&&r.radixPoint!=""&&e.inArray(r.radixPoint,i)!=-1?r.numericInput?b(e.inArray(r.radixPoint,i)):e.inArray(r.radixPoint,i):b(o)}else{u=b(o)}if(s<u){if(m(s))P(t,s);else P(t,b(s))}else P(t,u)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){P(e,0,b(l()["lastValidPosition"]))},0)}).bind("keydown.inputmask",X).bind("keypress.inputmask",V).bind("keyup.inputmask",J).bind(a+".inputmask dragdrop.inputmask drop.inputmask",function(t){var n=this,r=e(n);if(t.type=="propertychange"&&n._valueGet().length<=y()){return true}setTimeout(function(){L(n,true,false);if(H(p()))r.trigger("complete");r.click()},0)}).bind("setvalue.inputmask",function(){var e=this;L(e,true);s=p().join("");if(e._valueGet()==h().join(""))e._valueSet("")}).bind("_keypress.inputmask",V).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared);L(u,true,false);s=p().join("");var F;try{F=document.activeElement}catch(I){}if(F===u){f.addClass("focus.inputmask");P(u,b(l()["lastValidPosition"]))}else if(r.clearMaskOnLostFocus){if(p().join("")==h().join("")){u._valueSet("")}else{M(u)}}else{N(u,p())}q(u);};return this}var r=e.extend(true,{},e.inputmask.defaults,n),s=navigator.userAgent.match(new RegExp("msie 10","i"))!==null,o=navigator.userAgent.match(new RegExp("iphone","i"))!==null,u=navigator.userAgent.match(new RegExp("android.*safari.*","i"))!==null,a=m("paste")&&!s?"paste":m("input")?"input":"propertychange",f,l,c=0;if(u){var h=navigator.userAgent.match(/safari.*/i),p=parseInt((new RegExp(/[0-9]+/)).exec(h));f=p<=537}if(typeof t==="string"){switch(t){case"mask":g(r.alias,n);l=w();return this.each(function(){S(e.extend(true,{},l),0).mask(this)});case"unmaskedvalue":var d=e(this),v=this;if(d.data("_inputmask")){l=d.data("_inputmask")["masksets"];c=d.data("_inputmask")["activeMasksetIndex"];r=d.data("_inputmask")["opts"];return S(l,c).unmaskedvalue(d)}else return d.val();case"remove":return this.each(function(){var t=e(this),n=this;if(t.data("_inputmask")){l=t.data("_inputmask")["masksets"];c=t.data("_inputmask")["activeMasksetIndex"];r=t.data("_inputmask")["opts"];n._valueSet(S(l,c).unmaskedvalue(t,true));t.removeData("_inputmask");t.unbind(".inputmask");t.removeClass("focus.inputmask");var i;if(Object.getOwnPropertyDescriptor)i=Object.getOwnPropertyDescriptor(n,"value");if(i&&i.get){if(n._valueGet){Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet})}}else if(document.__lookupGetter__&&n.__lookupGetter__("value")){if(n._valueGet){n.__defineGetter__("value",n._valueGet);n.__defineSetter__("value",n._valueSet)}}try{delete n._valueGet;delete n._valueSet}catch(s){n._valueGet=undefined;n._valueSet=undefined}}});break;case"getemptymask":if(this.data("_inputmask")){l=this.data("_inputmask")["masksets"];c=this.data("_inputmask")["activeMasksetIndex"];return l[c]["_buffer"].join("")}else return"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask")["opts"].autoUnmask:false;case"isComplete":l=this.data("_inputmask")["masksets"];c=this.data("_inputmask")["activeMasksetIndex"];r=this.data("_inputmask")["opts"];return S(l,c).isComplete(this[0]._valueGet().split(""));case"getmetadata":if(this.data("_inputmask")){l=this.data("_inputmask")["masksets"];c=this.data("_inputmask")["activeMasksetIndex"];return l[c]["metadata"]}else return undefined;default:if(!g(t,n)){r.mask=t}l=w();return this.each(function(){S(e.extend(true,{},l),c).mask(this)});break}}else if(typeof t=="object"){r=e.extend(true,{},e.inputmask.defaults,t);g(r.alias,t);l=w();return this.each(function(){S(e.extend(true,{},l),c).mask(this)})}else if(t==undefined){return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&t!=""){try{t=t.replace(new RegExp("'","g"),'"');var i=e.parseJSON("{"+t+"}");e.extend(true,i,n);r=e.extend(true,{},e.inputmask.defaults,i);g(r.alias,i);r.alias=undefined;e(this).inputmask(r)}catch(s){}}})}return this}}})(jQuery)